#!/bin/bash

# Lucky50 å°ˆæ¡ˆ - Pre-commit Hook
# é˜²æ­¢åœ¨ main åˆ†æ”¯ç›´æ¥æäº¤ä»£ç¢¼

# ç²å–ç•¶å‰åˆ†æ”¯åç¨±
BRANCH=$(git symbolic-ref --short HEAD 2>/dev/null)

# æª¢æŸ¥æ˜¯å¦åœ¨ main åˆ†æ”¯
if [ "$BRANCH" = "main" ]; then
    echo ""
    echo "ğŸš« ============================================="
    echo "ğŸš«  éŒ¯èª¤ï¼šç¦æ­¢åœ¨ main åˆ†æ”¯ç›´æ¥æäº¤ä»£ç¢¼ï¼"
    echo "ğŸš« ============================================="
    echo ""
    echo "æ ¹æ“šå°ˆæ¡ˆè¦ç¯„ï¼Œæ‰€æœ‰ä»£ç¢¼ä¿®æ”¹å¿…é ˆåœ¨åŠŸèƒ½åˆ†æ”¯ä¸Šé€²è¡Œã€‚"
    echo ""
    echo "è«‹åŸ·è¡Œä»¥ä¸‹æ­¥é©Ÿï¼š"
    echo ""
    echo "  1. å»ºç«‹æ–°çš„åŠŸèƒ½åˆ†æ”¯ï¼š"
    echo "     git checkout -b <type>/<developer-name>/<feature-description>"
    echo ""
    echo "  ç¯„ä¾‹ï¼š"
    echo "     git checkout -b feat/lip/add-new-feature"
    echo "     git checkout -b fix/lip/fix-bug"
    echo ""
    echo "  2. é‡æ–°æäº¤ï¼š"
    echo "     git add ."
    echo "     git commit -m \"ä½ çš„æäº¤è¨Šæ¯\""
    echo ""
    echo "åƒè€ƒï¼š"
    echo "  - AGENTS.md - å°ˆæ¡ˆè¦å‰‡"
    echo "  - .opencode/skills/git-workflow/SKILL.md - Git å·¥ä½œæµç¨‹"
    echo ""
    exit 1
fi

# å¦‚æœä¸åœ¨ main åˆ†æ”¯ï¼Œå…è¨±æäº¤
exit 0
