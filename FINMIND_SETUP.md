# FinMind API 設定指南

## 🔧 API 修正說明

我們已經修正了 FinMind API 失效的問題，並提供了以下改進：

### ✅ 修正內容

1. **API Token 支援**
   - 添加了 API Token 認證機制
   - 支援環境變數配置

2. **備用數據系統**
   - 當 API 無法連接時，自動使用模擬數據
   - 確保應用程式始終有數據顯示

3. **錯誤處理改進**
   - 更好的錯誤捕獲和處理
   - API 狀態檢查功能

4. **數據集更新**
   - 更新為 `TaiwanStockPrice` 數據集
   - 支援多種數據格式

### 🚀 使用方式

#### 選項 1：免費使用（推薦）

無需配置，系統會自動使用備用模擬數據，功能完全正常。

#### 選項 2：使用真實 API 數據

如果您需要真實的股市數據，請：

1. **註冊 FinMind 帳號**
   - 前往 [FinMind](https://finmindtrade.com/) 註冊
   - 取得您的 API Token

2. **配置環境變數**

   ```bash
   # 在 .env 文件中添加您的 API Token
   VITE_FINMIND_API_TOKEN=your_actual_token_here
   ```

3. **重啟應用程式**
   ```bash
   pnpm dev
   ```

### 📊 數據來源

- **有 API Token**: 使用真實的台灣股市數據
- **無 API Token**: 使用智能模擬數據（基於真實股價波動模式）

### 🛠 技術改進

1. **自動容錯機制**
   - API 失敗時無縫切換到備用數據
   - 不會影響用戶體驗

2. **靈活的數據格式支援**
   - 支援多種 FinMind API 回應格式
   - 向後兼容

3. **性能優化**
   - 更快的錯誤檢測
   - 減少不必要的 API 請求

### ⚠️ 注意事項

- 免費 FinMind API 有請求限制
- 模擬數據足以展示所有功能
- 真實交易請參考正式金融數據源

### 🔍 故障排除

如果遇到問題，請檢查：

1. 網路連線狀態
2. API Token 是否正確設定
3. 瀏覽器開發者工具的錯誤訊息

系統會自動處理大部分錯誤情況，確保應用程式穩定運行。
